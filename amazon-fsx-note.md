# Amazon FSx のメモ

## Amazon FSx とはなんですか?

Amazon FSx は、AWS が提供するフルマネージド型の高パフォーマンスファイルストレージサービスです。

主な特徴は以下の通りです。

- Windows サーバー用の SMB 共有ファイルシステムとして利用できる Amazon FSx for Windows File Server
- Linux サーバー用の NFS 共有ファイルシステムとして利用できる Amazon FSx for Lustre
- 完全マネージド型で、サーバーレスなファイルストレージを提供
- 高いパフォーマンス、拡張性、耐障害性を実現
- Active Directory との統合が可能
- 自動バックアップ、自動修復機能でデータを保護
- ストレージ容量とパフォーマンスを必要に応じてスケールアップ・ダウン可能

Amazon FSx を利用することで、専用のファイルサーバーをプロビジョニングや運用する手間を省き、必要な分だけファイルストレージリソースを迅速かつ柔軟に利用できます。Windows や Linux ベースのアプリケーションと高速に統合可能なマネージドストレージサービスです。

## S3 でなんとかできませんか?

S3 に直接 SMB プロトコルでマウントすることはできません。 S3 はオブジェクトストレージサービスであり、ファイルシステムとしてマウントすることはできません。

ただし、S3 上のデータにファイルシステムとしてアクセスしたい場合は、以下のオプションがあります。

- Amazon FSx for Windows File Server: S3 データを Windows ファイルサーバーとしてマウントできるマネージドサービス。SMB アクセスが可能。
- AWS Storage Gateway: S3 をオンプレミスのファイルサーバーのボリュームとしてマウントできるゲートウェイアプライアンス。File Gateway 構成で SMB アクセスできる。
- s3fs: Linux 上で S3 をローカルファイルシステムのようにマウントできるオープンソースツール。
- CloudBerry Drive: Windows や macOS から S3 をドライブとしてマウントできるソフトウェア。

このように、S3 自体は SMB でマウントできませんが、他のツールやサービスと併用することでファイルシステムとして S3 にアクセス可能です。ニーズに応じて適切なツールを利用してください。

## VPC でないオンプレミスの PC と Amazon FSx をつなぐには?

- ネットワーク接続: オンプレミスのパソコンと AWS VPC を接続する必要があります。方法はいくつかありますが、AWS Direct Connect、AWS VPN、Site-to-Site VPN などが一般的です。
- 認証: オンプレミスのパソコンから AWS FSx にアクセスするには、AWS Identity and Access Management (IAM) ロールを使用して認証する必要があります。
- クライアントソフトウェア: オンプレミスのパソコンに、AWS FSx 用のクライアントソフトウェアをインストールする必要があります。Windows の場合は、SMB クライアントが標準でインストールされています。

## Amazon FSx と同等の Microsoft や Google のサービスは?

| サービス名                         | 特徴                                                                       | 価格                                           | その他                      |
| ---------------------------------- | -------------------------------------------------------------------------- | ---------------------------------------------- | --------------------------- |
| Amazon FSx for Windows File Server | Windows Server 2019 または 2022 をベースとする完全管理型のファイルサービス | オンデマンド: $0.0345/時間 + $0.00095/GB/月    | 30 日間の無料トライアルあり |
| Azure Files                        | SMB 3.0 をサポートするファイル共有サービス                                 | 標準: $0.0023/GB/月 + $0.0144/トランザクション |                             |
| Cloud Storage for Windows          | SMB 3.1.1 をサポートするファイル共有サービス                               | 標準: $0.002/GB/月 + $0.012/トランザクション   |
